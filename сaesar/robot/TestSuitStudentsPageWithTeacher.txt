*** Settings ***
Documentation     Tests check the adding, removal and editing of student data, adding cv_files and photo in the list of students with role teacher.
Suite Setup       Prepare for Tests by Coordanator
Suite Teardown    Close Browser
Test Teardown     Url for start next test    ${url_for_start_test}
Library           Selenium2Library
Library           Collections
Resource          Resource/students_page_resource.robot

*** Test Cases ***
test01_new_student
    [Documentation]    Check adding new student by teacher.
    [Tags]    add student
    Click Edit Students List Button
    Click Add New Student Button
    Enter Student Data With Teacher
    Click Save Data Changes Button
    Click Exit Students List Editor
    @{Students list}=    Students list
    List Should Contain Value    ${Students list}    ${new_student_by_teacher}    New student is not added.

test02_del_student
    [Documentation]    Check deleting first student from the student's list by teacher.
    [Tags]    del student
    Click Edit Students List Button
    ${First Student}    Get Text    css=#main-section > div > div > table > tbody:nth-child(2) > tr
    Deleting First Student
    Click Exit Students List Editor
    Page Should Not Contain    ${First Student}    First Student is not deleted.

test03_adding_cv
    [Documentation]    Check is cv file added to the student's data by teacher.
    [Tags]    CV
    Click Edit Students List Button
    Click Add New Student Button
    Add CV File
    Page Should Contain    cv.docx    CV is not download.

test04_add_photo
    [Documentation]    Check is photo file added to the student's data by teacher.
    Click Edit Students List Button
    Click Add New Student Button
    Add Photo File
    Page Should Contain    photo.jpg    Photo is not download.

test05_editing_first_student
    [Documentation]    Check is first student editing by teacher.
    Click Edit Students List Button
    Click Editing First Student
    Edit Student Data With Administrator
    Click Save Data Changes Button
    Click Exit Students List Editor
    @{Students list}=    Students list
    List Should Contain Value    ${Students list}    ${editing_student_by_teacher}    Student is not edited.

*** Keywords ***
Enter Student Data With Teacher
    Wait Until Element Is Enabled    xpath=//*[@id="modal-window"]//div[2]/div[1]/input    5
    ${first_student_first_name}=    Get From Dictionary    ${data third student}    first_name
    Input Text    xpath=//*[@id="modal-window"]//div[2]/div[1]/input    ${first_student_first_name}
    ${first_student_last_name}=    Get From Dictionary    ${data third student}    last_name
    Input Text    css=.lastName    ${first_student_last_name}
    ${english level first new student}=    Get From Dictionary    ${data third student}    english_level
    Select From List By Value    css=#modal-window > div > section > section > div:nth-child(4) > div:nth-child(1) > select    ${english level first new student}
    ${incoming_mark}    Get From Dictionary    ${data third student}    incoming_mark
    Input Text    xpath=//*[@id="modal-window"]//div[1]/div[2]/input    ${incoming_mark}
    ${entry_mark}    Get From Dictionary    ${data third student}    entry_mark
    Input Text    xpath=//*[@id="modal-window"]//div[2]/div[2]/input    ${entry_mark}
    Comment    Select From List By Label

Edit Student Data With Teacher
    Wait Until Element Is Enabled    xpath=//*[@id="modal-window"]//div[2]/div[1]/input    5
    ${third_student_first_name}=    Get From Dictionary    ${data editing first student by teacher}    first_name
    Clear Element Text    xpath=//*[@id="modal-window"]//div[2]/div[1]/input
    Input Text    xpath=//*[@id="modal-window"]//div[2]/div[1]/input    ${third_student_first_name}
    ${third_student_last_name}=    Get From Dictionary    ${data editing first student by teacherr}    last_name
    Clear Element Text    css=.lastName
    Input Text    css=.lastName    ${third_student_last_name}
    ${english level third new student}=    Get From Dictionary    ${data editing first student by teacher}    english_level
    Select From List By Value    css=#modal-window > div > section > section > div:nth-child(4) > div:nth-child(1) > select    ${english level third new student}
    ${incoming_mark}    Get From Dictionary    ${data editing first student by teacher}    incoming_mark
    Clear Element Text    xpath=//*[@id="modal-window"]//div[1]/div[2]/input
    Input Text    xpath=//*[@id="modal-window"]//div[1]/div[2]/input    ${incoming_mark}
    ${entry_mark}    Get From Dictionary    ${data editing first student by teacher}    entry_mark
    Clear Element Text    xpath=//*[@id="modal-window"]//div[2]/div[2]/input
    Input Text    xpath=//*[@id="modal-window"]//div[2]/div[2]/input    ${entry_mark}
